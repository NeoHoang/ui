var MapzenBug=function(){"use strict";function e(e,t,n,o){return w.analytics===!1?!1:"undefined"==typeof ga?!1:void ga("send","event",g,e,t,n,o)}function t(){!function(e,t,n,o,i,c,a){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,c=t.createElement(n),a=t.getElementsByTagName(n)[0],c.async=1,c.src=o,a.parentNode.insertBefore(c,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",b,"auto"),ga("send","pageview")}function n(e){var t=document.createElement("link"),n=document.head.querySelectorAll("link, style")[0];t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),"undefined"!==n?document.head.insertBefore(t,n):document.head.appendChild(t)}function o(e,t,n,o){var i=void 0!==window.screenLeft?window.screenLeft:window.screen.left,c=void 0!==window.screenTop?window.screenTop:window.screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=a/2-n/2+i,d=r/3-o/3+c,u=window.open(e,t,"scrollbars=yes, width="+n+", height="+o+", top="+d+", left="+s);window.focus&&u.focus()}function i(){var e,t,n="https://twitter.com/intent/tweet",o=encodeURIComponent(window.location.href);return e=encodeURIComponent(w.tweet?w.tweet:w.name?w.name+", powered by @mapzen":"Check out this project by @mapzen!"),t="?text="+e+"&url="+o,n+t}function c(){var e="https://www.facebook.com/sharer/sharer.php?u=",t=encodeURIComponent(window.location.href);return e+t}function a(){var e=w.link||p,t=w.name?w.name+" Â· Powered by Mapzen":"Powered by Mapzen",n=w.repo||f,o=document.createElement("div");o.id="mz-bug",o.className="mz-bug-container",o.setAttribute("role","widget");var a=r("mapzen",e,t,s),m=r("twitter",i(),"Share this on Twitter",d),h=r("facebook",c(),"Share this on Facebook",u),g=r("github",n,"View source on GitHub",l);return o.appendChild(a),o.appendChild(m),o.appendChild(h),o.appendChild(g),document.body.appendChild(o),o}function r(e,t,n,o){var i=document.createElement("a"),c=document.createElement("div");return c.className="mz-bug-"+e+"-logo",i.href=t,i.target="_blank",i.className="mz-bug-"+e+"-link",i.title=n,i.addEventListener("click",o),i.appendChild(c),i}function s(t){e("click","mapzen logo",w.name)}function d(t){t.preventDefault();var n=i();o(n,"Twitter",580,470),e("click","twitter",w.name)}function u(t){t.preventDefault();var n=c();o(n,"Facebook",580,470),e("click","facebook",w.name)}function l(t){e("click","github",w.name)}var w,m="https:"===window.location.protocol?"https:":"http:",h=m+"//s3.amazonaws.com/assets-staging.mapzen.com/ui/components/bug/bug.min.css",p="https://mapzen.com/",f="https://github.com/mapzen/",g="demo",b="UA-47035811-1",y=function(o){if(!(this instanceof y))return new y(o);if(window.self!==window.top)return!1;if(w={analytics:!0,name:null,stylesheet:h},"object"==typeof o)for(var i in o)w[i]=o[i];this.opts=w,n(this.opts.stylesheet),this.el=a(this.opts),this.twitterEl=this.el.querySelector(".mz-bug-twitter-link"),this.facebookEl=this.el.querySelector(".mz-bug-facebook-link"),this.rebuildLinks(),window.onhashchange=function(){this.rebuildLinks()}.bind(this),window.setTimeout(function(){"undefined"==typeof ga&&(t(),e("analytics","fallback",null,!0)),e("bug","active",w.name,!0)},0)};return y.prototype.rebuildLinks=function(){this.twitterEl.href=i(),this.facebookEl.href=c()},y}();"object"==typeof module&&"object"==typeof module.exports?module.exports=MapzenBug:window.MapzenBug=MapzenBug;